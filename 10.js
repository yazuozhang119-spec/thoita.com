class LevelBar{constructor(){this.xp=0,this.level=0,this.calculateDimensions(),this.hasInit=!1,this.render={xp:this.xp,level:this.level,initAnimation:0}}calculateDimensions(){this.dimensions={x:.8*canvas.w,y:.94*canvas.h,w:.19*canvas.w,h:.04*canvas.h,roundness:canvas.w,innerPadding:4},"game"==window.state&&(this.dimensions.y-=15)}init(i){this.xp=i,this.level=levelPerXp(this.xp),this.hasInit=!0,this.render.xp=this.xp,1==localStorage.getItem("ascended")&&(window.characterSelector=new CharacterSelector)}addXp(i){!0!==window.automaticallyLeaveFlag&&(this.xp+=i,this.level=levelPerXp(this.xp))}getPetalSlotsNumber(){return 10}draw(){if(!0===this.hasInit&&(this.render.initAnimation=interpolate(this.render.initAnimation,1,.04)),this.render.initAnimation<.999&&ctx.translate(0,(1-this.render.initAnimation)*canvas.h*.18),this.render.xp=interpolate(this.render.xp,this.xp,.04),this.render.level=levelPerXp(this.render.xp),this.dimensions.w<this.dimensions.h)return;ctx.beginPath(),ctx.fillStyle="#333333",ctx.beginPath(),ctx.roundRect(this.dimensions.x,this.dimensions.y,this.dimensions.w,this.dimensions.h,this.dimensions.roundness),ctx.fill(),ctx.closePath(),this.render.level%1<.1&&(ctx.globalAlpha=Math.max(0,this.render.level%1*9.5+.05)),ctx.fillStyle="#e2eb67",ctx.beginPath(),ctx.roundRect(this.dimensions.x+this.dimensions.innerPadding,this.dimensions.y+this.dimensions.innerPadding,this.dimensions.h+(this.dimensions.w-this.dimensions.h)*(this.render.level%1)-2*this.dimensions.innerPadding,this.dimensions.h-2*this.dimensions.innerPadding,this.dimensions.roundness),ctx.fill(),ctx.closePath(),ctx.globalAlpha=1,ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.lineWidth=2.25,ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="900 18px Ubuntu";let i=`Lvl ${Math.ceil(this.render.level)} Flower`;if(ctx.strokeText(i,this.dimensions.x+this.dimensions.w/2,this.dimensions.y+this.dimensions.h/2),ctx.fillText(i,this.dimensions.x+this.dimensions.w/2,this.dimensions.y+this.dimensions.h/2),mouse.canvasX>this.dimensions.x&&mouse.canvasY>this.dimensions.y){let i=`${formatAmountHighPrecision(levelBar.xp)}/${formatAmountHighPrecision(xpPerLevel(Math.ceil(levelPerXp(levelBar.xp))))} xp`,e=formatAmountHighPrecision(Stats.hpPerLevel(this.render.level));"1v1"==biomeManager.getCurrentBiomeData().current&&(e=formatAmountHighPrecision(2*(100+this.render.level))),ctx.strokeText(i+" | "+e+" hp",this.dimensions.x+this.dimensions.w/2,this.dimensions.y/1.035+this.dimensions.h/2),ctx.fillText(i+" | "+e+" hp",this.dimensions.x+this.dimensions.w/2,this.dimensions.y/1.035+this.dimensions.h/2)}this.render.initAnimation<.999&&ctx.translate(0,-(1-this.render.initAnimation)*canvas.h*.18)}}const levelBar=new LevelBar;