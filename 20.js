class CollectedMenu{constructor(){this.petalContainers={}}addPetalContainer(t){void 0===this.petalContainers[t.rarity]&&(this.petalContainers[t.rarity]=[]);let e=this.petalContainers[t.rarity].find(e=>e.type===t.type);void 0!==e?(e.amount+=t.amount,e.lastAmountChangedTime=time):(t.w=52,t.h=52,t.collectedAnimation=0,this.petalContainers[t.rarity].unshift(t)),this.petalContainers[t.rarity].sort()}calculateDimensions(){let t=0;for(let e=numberOfRarities-1;e>=0;e--)void 0!==this.petalContainers[e]&&(t+=this.petalContainers[e].length);this.dimensions={x:canvas.w-340,y:20,w:320,h:140+62*Math.min(13,Math.floor((t-1)/4))},this.w=this.dimensions.w,this.h=this.dimensions.h}draw(){this.calculateDimensions(),ctx.fillStyle="black",ctx.lineWidth=8,ctx.translate(this.dimensions.x,this.dimensions.y),ctx.globalAlpha=.5,ctx.beginPath(),ctx.roundRect(0,0,this.w,this.h,5),ctx.fill(),ctx.globalAlpha=1,ctx.closePath(),ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 24px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText(window.spectating?"Petals dropped":"Collected this run",this.w/2,27.5),ctx.fillText(window.spectating?"Petals dropped":"Collected this run",this.w/2,27.5);let t=0;for(let e=numberOfRarities-1;e>=0;e--)if(void 0!==this.petalContainers[e]&&!(Math.floor(t/4)>13))for(let i=0;i<this.petalContainers[e].length;i++){if(Math.floor(t/4)>13)continue;const n=this.petalContainers[e][i];n.x=60+t%4/3*(this.w-50-15-15-40),n.y=80+62*Math.floor(t/4),n.render.x=n.x,n.render.y=n.y,n.draw(),t++}ctx.translate(-this.dimensions.x,-this.dimensions.y)}}let collectedMenu=new CollectedMenu;