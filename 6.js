class DeadMenu{constructor(){this.gameEnded=!1,this.gameEndedFadeTimer=0,this.acceptedDeath=!1,this.hoveringOverButton=!1,this.hoveringOverRematchButton=!1,this.rematchRequested=!1}drawDeadFlower(t,e,n){ctx.fillStyle="#ffe763",ctx.strokeStyle="#cebb50",ctx.lineWidth=n/8,ctx.beginPath(),ctx.arc(t,e,n,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.fillStyle="#212219",ctx.strokeStyle=ctx.fillStyle,ctx.lineWidth=n/8,ctx.lineCap="round";let i={x:t-n/3.5,y:e-5*n/23.5};ctx.beginPath(),ctx.moveTo(i.x+4*n/23.5,i.y+4*n/23.5),ctx.lineTo(i.x-4*n/23.5,i.y-4*n/23.5),ctx.stroke(),ctx.closePath(),ctx.beginPath(),ctx.moveTo(i.x+4*n/23.5,i.y-4*n/23.5),ctx.lineTo(i.x-4*n/23.5,i.y+4*n/23.5),ctx.stroke(),ctx.closePath(),i={x:t+n/3.5,y:e-5*n/23.5},ctx.beginPath(),ctx.moveTo(i.x+4*n/23.5,i.y+4*n/23.5),ctx.lineTo(i.x-4*n/23.5,i.y-4*n/23.5),ctx.stroke(),ctx.closePath(),ctx.beginPath(),ctx.moveTo(i.x+4*n/23.5,i.y-4*n/23.5),ctx.lineTo(i.x-4*n/23.5,i.y+4*n/23.5),ctx.stroke(),ctx.closePath(),ctx.strokeStyle=ctx.fillStyle,ctx.lineWidth=n/15,ctx.lineCap="round";ctx.beginPath(),ctx.moveTo(t+n/4,e+9.5*n/23.5),ctx.quadraticCurveTo(t,e+1.07*n*5.5/23.5*61.1/70,t-n/4,e+9.5*n/23.5),ctx.stroke()}draw(){ctx.globalAlpha=.2,ctx.fillStyle="black",ctx.fillRect(0,0,canvas.w,canvas.h),ctx.globalAlpha=1,!0===this.gameEnded?ctx.globalAlpha=1-Math.min(1,this.gameEndedFadeTimer/30):ctx.globalAlpha=1,ctx.translate(0,-26),1==this.acceptedDeath?this.drawWaiting():this.drawDead(),!0===this.gameEnded&&(this.gameEndedFadeTimer++,ctx.globalAlpha=Math.min(1,this.gameEndedFadeTimer/30),this.drawGameOver()),ctx.translate(0,26),collectedMenu.draw(),ctx.textBaseline="middle"}drawDead(){ctx.save(),ctx.translate(canvas.w/2,canvas.h/2),this.drawDeadPetal(-15,-20,inventory.topPetalContainers[3]),this.drawDeadPetal(40,-10,inventory.topPetalContainers[4]),this.drawDeadPetal(-50,10,inventory.topPetalContainers[2]),ctx.restore();ctx.save(),ctx.translate(canvas.w/2,canvas.h/2),ctx.rotate(-.2),this.drawDeadFlower(0,0,35),ctx.restore(),ctx.save(),ctx.translate(canvas.w/2,canvas.h/2),this.drawDeadPetal(-15,45,inventory.topPetalContainers[1]),this.drawDeadPetal(50,30,inventory.topPetalContainers[0]),ctx.restore();let t=window.lastHitBy||"A Skill Issue";ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 16px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("You were destroyed by:",canvas.w/2,canvas.h/2-120),ctx.fillText("You were destroyed by:",canvas.w/2,canvas.h/2-120),ctx.font="900 22px 'Ubuntu'",ctx.strokeText(t,canvas.w/2,canvas.h/2-85),ctx.fillText(t,canvas.w/2,canvas.h/2-85),ctx.restore(),this.buttonDimensions={x:canvas.w/2-68.4532,y:canvas.h/2+78,w:136.9064,h:40};const e=mouse.canvasX,n=mouse.canvasY;if(!1===this.gameEnded&&0==this.acceptedDeath&&e>this.buttonDimensions.x&&e<this.buttonDimensions.x+this.buttonDimensions.w&&n>this.buttonDimensions.y-26&&n<this.buttonDimensions.y+this.buttonDimensions.h-26?(this.hoveringOverButton=!0,this.hoveringOverRematchButton=!1,setCursor("pointer")):!1===this.gameEnded&&(!window.inMainPvpRoom||window.deadMenuTime>=5e3)&&0==this.acceptedDeath&&e>this.buttonDimensions.x&&e<this.buttonDimensions.x+this.buttonDimensions.w&&n>this.buttonDimensions.y+1.28*this.buttonDimensions.h-26&&n<this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h-26?(this.hoveringOverRematchButton=!0,this.hoveringOverButton=!1,setCursor("pointer")):(this.hoveringOverButton=!1,this.hoveringOverRematchButton=!1),ctx.globalAlpha=1,ctx.fillStyle=this.hoveringOverButton?"#1cd128":"#10c21a",ctx.lineWidth=6,ctx.strokeStyle=blendColor(ctx.fillStyle,"#000000",.2),ctx.beginPath(),ctx.roundRect(this.buttonDimensions.x,this.buttonDimensions.y,this.buttonDimensions.w,this.buttonDimensions.h,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("Continue",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),ctx.fillText("Continue",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),void 0!==biomeManager&&"1v1"===biomeManager.getCurrentBiome()){let t=!1;window.inMainPvpRoom&&window.deadMenuTime<5e3&&(t=!0),t?(ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("You may rematch in: "+Math.floor((5e3-window.deadMenuTime)/100)/10+"s",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("You may rematch in: "+Math.floor((5e3-window.deadMenuTime)/100)/10+"s",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.restore()):(ctx.globalAlpha=1,ctx.fillStyle=this.hoveringOverRematchButton?"#1cd128":"#10c21a",ctx.lineWidth=6,ctx.strokeStyle=blendColor(ctx.fillStyle,"#000000",.2),ctx.beginPath(),ctx.roundRect(this.buttonDimensions.x,this.buttonDimensions.y+1.28*this.buttonDimensions.h,this.buttonDimensions.w,this.buttonDimensions.h,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("Rematch",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("Rematch",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.restore(),!0===this.rematchRequested&&(ctx.lineWidth=2,ctx.fillStyle="white",ctx.strokeStyle="black",ctx.font="900 20px 'Ubuntu'",ctx.textAlign="left",ctx.strokeText("Rematch requested...",this.buttonDimensions.x+this.buttonDimensions.w+10,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("Rematch requested...",this.buttonDimensions.x+this.buttonDimensions.w+10,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2)))}ctx.restore()}drawWaiting(){this.buttonDimensions={x:canvas.w/2-102.6798,y:canvas.h/2+39,w:205.3596,h:40};const t=mouse.canvasX,e=mouse.canvasY;!1===this.gameEnded&&1==this.acceptedDeath&&t>this.buttonDimensions.x&&t<this.buttonDimensions.x+this.buttonDimensions.w&&e>this.buttonDimensions.y-26&&e<this.buttonDimensions.y+this.buttonDimensions.h-26?(this.hoveringOverButton=!0,setCursor("pointer")):(this.hoveringOverButton=!1,this.hoveringOverRematchButton=!1),ctx.fillStyle=this.hoveringOverButton?"#d94747":"#d11d1d",ctx.lineWidth=6,ctx.strokeStyle=blendColor(ctx.fillStyle,"#000000",.2),ctx.beginPath(),ctx.roundRect(this.buttonDimensions.x,this.buttonDimensions.y,this.buttonDimensions.w,this.buttonDimensions.h,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 18px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("Leave Game Instead",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),ctx.fillText("Leave Game Instead",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),ctx.restore(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 18px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("You will respawn next wave",canvas.w/2,canvas.h/2-5),ctx.fillText("You will respawn next wave",canvas.w/2,canvas.h/2-5),ctx.restore()}drawGameOver(){this.buttonDimensions={x:canvas.w/2-68.4532,y:canvas.h/2+39,w:136.9064,h:40};const t=mouse.canvasX,e=mouse.canvasY;if(!0===this.gameEnded&&1==this.acceptedDeath&&t>this.buttonDimensions.x&&t<this.buttonDimensions.x+this.buttonDimensions.w&&e>this.buttonDimensions.y-26&&e<this.buttonDimensions.y+this.buttonDimensions.h-26?(this.hoveringOverButton=!0,this.hoveringOverRematchButton=!1,setCursor("pointer")):!0===this.gameEnded&&(!window.inMainPvpRoom||window.deadMenuTime>=5e3)&&1==this.acceptedDeath&&t>this.buttonDimensions.x&&t<this.buttonDimensions.x+this.buttonDimensions.w&&e>this.buttonDimensions.y+1.28*this.buttonDimensions.h-26&&e<this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h-26?(this.hoveringOverRematchButton=!0,this.hoveringOverButton=!1,setCursor("pointer")):(this.hoveringOverButton=!1,this.hoveringOverRematchButton=!1),ctx.fillStyle=this.hoveringOverButton?"#d94747":"#d11d1d",ctx.lineWidth=6,ctx.strokeStyle=blendColor(ctx.fillStyle,"#000000",.2),ctx.beginPath(),ctx.roundRect(this.buttonDimensions.x,this.buttonDimensions.y,this.buttonDimensions.w,this.buttonDimensions.h,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("Continue",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),ctx.fillText("Continue",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+this.buttonDimensions.h/2),ctx.restore(),void 0!==biomeManager&&"1v1"===biomeManager.getCurrentBiome()){let t=!1;window.inMainPvpRoom&&window.deadMenuTime<5e3&&(t=!0),t?(ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("You may rematch in: "+Math.floor((5e3-window.deadMenuTime)/100)+"s",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("You may rematch in: "+Math.floor((5e3-window.deadMenuTime)/100)+"s",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.restore()):(ctx.globalAlpha=1,ctx.fillStyle=this.hoveringOverRematchButton?"#1cd128":"#10c21a",ctx.lineWidth=6,ctx.strokeStyle=blendColor(ctx.fillStyle,"#000000",.2),ctx.beginPath(),ctx.roundRect(this.buttonDimensions.x,this.buttonDimensions.y+1.28*this.buttonDimensions.h,this.buttonDimensions.w,this.buttonDimensions.h,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.letterSpacing="0.5px",ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.font="900 22px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.strokeText("Rematch",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("Rematch",this.buttonDimensions.x+this.buttonDimensions.w/2,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.restore(),!0===this.rematchRequested&&(ctx.lineWidth=2,ctx.fillStyle="white",ctx.strokeStyle="black",ctx.font="900 20px 'Ubuntu'",ctx.textAlign="left",ctx.strokeText("Rematch requested...",this.buttonDimensions.x+this.buttonDimensions.w+10,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2),ctx.fillText("Rematch requested...",this.buttonDimensions.x+this.buttonDimensions.w+10,this.buttonDimensions.y+1.28*this.buttonDimensions.h+this.buttonDimensions.h/2)))}ctx.save(),ctx.letterSpacing="1px",ctx.fillStyle="#8a0000",ctx.strokeStyle="black",ctx.font="900 56px 'Ubuntu'",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=6,!0===window.hasWonPvp?(ctx.fillStyle="#008a2e",ctx.strokeText("You win!",canvas.w/2,canvas.h/2-5),ctx.fillText("You win!",canvas.w/2,canvas.h/2-5)):(ctx.strokeText("Game Over",canvas.w/2,canvas.h/2-5),ctx.fillText("Game Over",canvas.w/2,canvas.h/2-5)),ctx.restore()}drawDeadPetal(t,e,n){if(!n||!n.petals||!n.petals[0])return;let i=new Petal(n.petals[0]);ctx.translate(t,e),ctx.scale(2,2),i.draw(),ctx.scale(.5,.5),ctx.translate(-t,-e)}gameOver(){this.gameEndedFadeTimer=0,this.gameEnded=!0,this.acceptedDeath=!0}unGameOver(){this.gameEndedFadeTimer=0,this.gameEnded=!1,this.acceptedDeath=!1}}