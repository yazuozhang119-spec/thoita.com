class Shop{constructor(){this.offers=[],this.tokens=0,this.menu={color:"#8e6bb5",border:"#735793",y:{val:canvas.h+10,target:canvas.h+10},active:!1,icon:new Image,flower:new Flower(-1)},this.menu.icon.src="./gfx/coin.png",this.hoveringOverButton=!1}draw(){this.menu.y.val=interpolate(this.menu.y.val,this.menu.y.target,.03*dt),!0===this.menu.active?this.menu.y.target=canvas.h-20-500:this.menu.y.target=canvas.h+10,this.menu.y.val<canvas.h+10&&(ctx.fillStyle=this.menu.color,ctx.strokeStyle=this.menu.border,ctx.lineWidth=8,ctx.beginPath(),ctx.roundRect(130,this.menu.y.val,600,500,3),ctx.fill(),ctx.stroke(),ctx.closePath(),mouse.canvasX>680&&mouse.canvasY>this.menu.y.val+17.5&&mouse.canvasX<710&&mouse.canvasY<this.menu.y.val+17.5+30?(ctx.fillStyle="#c16666",setCursor("pointer"),this.hoveringOverX=!0):(this.hoveringOverX=!1,ctx.fillStyle="#c1565e"),ctx.strokeStyle="#90464b",ctx.lineWidth=5,ctx.beginPath(),ctx.roundRect(680,this.menu.y.val+17.5,30,30,6),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.lineWidth=4.75,ctx.lineCap="round",ctx.strokeStyle="#cccccc",ctx.beginPath(),ctx.moveTo(687.5,this.menu.y.val+17.5+7.5),ctx.lineTo(702.5,this.menu.y.val+17.5+22.5),ctx.stroke(),ctx.closePath(),ctx.beginPath(),ctx.moveTo(702.5,this.menu.y.val+17.5+7.5),ctx.lineTo(687.5,this.menu.y.val+17.5+22.5),ctx.stroke(),ctx.closePath(),ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="900 30px 'Ubuntu'",ctx.lineWidth=4,ctx.fillStyle="#ffffff",ctx.strokeStyle="#000000",ctx.strokeText("Shop",430,this.menu.y.val+32.5),ctx.fillText("Shop",430,this.menu.y.val+32.5),ctx.fillStyle="#000000",ctx.globalAlpha*=.25,ctx.translate(150,this.menu.y.val+15),ctx.beginPath(),ctx.roundRect(0,0,111.25,35,3),ctx.roundRect(0,50,111.25,415,3),ctx.roundRect(126.25,50,432.5,415,3),ctx.fill(),ctx.closePath(),ctx.globalAlpha/=.25,ctx.translate(17.5,17.75),petalRenderMap.Token({radius:10,angle:0,lastTicksSinceLastDamaged:1e3,ticksSinceLastDamaged:1e3,rarity:0}),ctx.font="900 15px 'Ubuntu'",ctx.textAlign="left",ctx.textBaseline="middle",ctx.lineWidth=3,ctx.fillStyle=this.tokens>=0?"#ffffff":"#ff0000",ctx.strokeStyle="#000000",ctx.strokeText(formatAmountHighPrecision(this.tokens),17.5,0),ctx.fillText(formatAmountHighPrecision(this.tokens),17.5,0),this.offers[0]&&this.drawOffers(),ctx.translate(-17.5,-17.75),ctx.translate(-150,-(this.menu.y.val+15)),this.menu.flower.drawFlower(487.5,this.menu.y.val+15+30+216.25,75),this.menu.flower.render.angle=Math.atan2(mouse.canvasY-(this.menu.y.val+15+30+216.25),mouse.canvasX-487.5)),ctx.lineWidth=500}drawOffers(){let t=this.menu.y.val+15,e=mouse.canvasX-150,c=mouse.canvasY-t,n=10,s=60;for(let t=0;t<this.offers.length;t++)ctx.translate(n,s),e>n&&e<n+40.625&&c>s&&c<s+40.625&&(this.offers[t].pc.isHovered=!0),this.offers[t].pc.draw(),this.offers[t].pc.render.x+=300-n-40.625,this.offers[t].pc.render.y+=-s-40.625+15,this.offers[t].pc.drawStatsBox(),this.offers[t].pc.render.x+=n-300+40.625,this.offers[t].pc.render.y+=s+40.625-15,ctx.translate(-n,-s),s+=51.125,7==t&&(n+=55.625,s=60)}drawIcon(){ctx.fillStyle=this.menu.color,ctx.strokeStyle=this.menu.border,mouse.canvasX+6>20&&mouse.canvasY+6>canvas.h-400&&mouse.canvasX-6<100&&mouse.canvasY-6<canvas.h-320?(ctx.fillStyle="#9979bc",setCursor("pointer"),this.hoveringOverButton=!0):this.hoveringOverButton=!1,ctx.lineWidth=6,ctx.beginPath(),ctx.roundRect(20,canvas.h-400,80,80,3),ctx.fill(),ctx.stroke(),this.menu.icon.complete&&this.menu.icon.naturalWidth>0?ctx.drawImage(this.menu.icon,35,canvas.h-390,50,50):(ctx.font="900 30px Ubuntu",ctx.fillStyle="#ffd700",ctx.strokeStyle="#000000",ctx.lineWidth=2,ctx.textAlign="center",ctx.textBaseline="middle",ctx.strokeText("ðŸª™",60,canvas.h-365),ctx.fillText("ðŸª™",60,canvas.h-365)),ctx.fillStyle="#f0f0f0",ctx.strokeStyle="black",ctx.lineWidth=2.25,ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="900 14px Ubuntu";const t=ctx.letterSpacing;ctx.letterSpacing="0px",ctx.strokeText("[Z]",82.5,canvas.h-385),ctx.fillText("[Z]",82.5,canvas.h-385),ctx.letterSpacing=t}toggle(){!0===globalInventory.menuActive&&globalInventory.toggleMenu(),!0===craftingMenu.menuActive&&craftingMenu.toggleMenu(),!0===mobGallery.menuActive&&mobGallery.toggleMenu(),this.menu.active=!this.menu.active}}const shop=new Shop;