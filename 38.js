class SettingsMenu{constructor(){this.options=[{type:"toggle",name:"Mouse Movement",state:mouseMovement,changeTime:0,toggleFn:e=>{mouseMovement=e,localStorage.setItem("mouseMovement",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Reduce Damage Flash",state:damageFlash,changeTime:0,toggleFn:e=>{damageFlash=e,localStorage.setItem("damageFlash",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Stat Boxes",state:window.statBoxes,changeTime:0,toggleFn:e=>{window.statBoxes=e,localStorage.setItem("statboxes",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Show damage numbers",state:window.damageCounter,changeTime:0,toggleFn:e=>{window.damageCounter=e,localStorage.setItem("damageCounter",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Crafting petal rain",state:window.petalRain,changeTime:0,toggleFn:e=>{window.petalRain=e,localStorage.setItem("petalRain",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Community biomes",state:window.showCommunityBiomes,changeTime:0,toggleFn:e=>{window.showCommunityBiomes=e,localStorage.setItem("showCommunityBiomes",e),biomeManager.drawRightArrow=void 0!==biomeManager.biomeOrder[biomeManager.currentBiome+1],window.showCommunityBiomes||(biomeManager.drawRightArrow=biomeManager.currentBiome+1<officialBiomes.length)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Show Announcements",state:window.announcements,changeTime:0,toggleFn:e=>{window.announcements=e,localStorage.setItem("announcements",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Disable Ascend Prompt",state:window.disableAscendedAsk,changeTime:0,toggleFn:e=>{window.disableAscendedAsk=e,localStorage.setItem("disableAscendedAsk",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"High Quality Renders",state:window.hqp,changeTime:0,toggleFn:e=>{window.hqp=e,localStorage.setItem("hqp",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Disable Grid",state:window.noGrid,changeTime:0,toggleFn:e=>{window.noGrid=e,localStorage.setItem("noGrid",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Render Squad Petals",state:window.renderSquadPetals,changeTime:0,toggleFn:e=>{window.renderSquadPetals=e,localStorage.setItem("renderSquadPetals",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"toggle",name:"Render Debug",state:window.toRenderDebug,changeTime:0,toggleFn:e=>{window.toRenderDebug=e,localStorage.setItem("toRenderDebug",e)},screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:"Redeem Code",changeTime:0,clickFn:()=>{const e=prompt("Enter Code To Redeem!");null!==e&&0!==e.length&&send({redeemCode:e})},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:"Logout",changeTime:0,clickFn:()=>{localStorage.removeItem("username"),localStorage.removeItem("hashedPassword"),window.location.reload()},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:"Change Password",changeTime:0,clickFn:()=>{let e=prompt("Enter your new password");if(null===e||0===e.length)return;let t=prompt("Re-enter your new password");null!==t&&0!==t.length&&(e==t?(hashedPassword=SHA(e+"Zert Is Gay"),hashedPassword2=SHA(e+"flowrsalt12345"),send({changePassword:!0,username,hashedPassword,hashedPassword2})):alert("The passwords you entered do not match!"))},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:"Privacy Policy",changeTime:0,clickFn:()=>{window.location.href="https://flowr.fun/privacy"},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:location.href.endsWith("3d")?"2D Mode":"3D Mode",changeTime:0,clickFn:()=>{!0===window.is3D?location.replace("https://flowr.fun"):location.replace("https://flowr.fun/3d")},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}},{type:"button",name:"florr.io (this game's inspiration)",changeTime:0,fontSize:14,clickFn:()=>{location.replace("https://florr.io")},hovered:!1,screenPosition:{x:0,y:0,w:0,h:0}}],this.x=110,this.y=20,this.w=256,this.h=50*this.options.length+7,this.offset=-this.h-40,this.targetOffset=-this.h-40,this.active=!1}toggle(){this.active=!this.active,this.active?this.targetOffset=0:this.targetOffset=-this.h-40}draw(){ctx.textBaseline="middle",ctx.fontKerning="none",ctx.letterSpacing="-.1px",this.offset=interpolate(this.offset,this.targetOffset,.3),this.currentHeight=5,ctx.translate(this.x,this.y+this.offset),ctx.fillStyle="#aaaaaa",ctx.strokeStyle="#8a8a8a",ctx.lineWidth=8,ctx.beginPath(),ctx.roundRect(0,0,this.w,this.h,3),ctx.fill(),ctx.stroke(),ctx.closePath();for(let e=0;e<this.options.length;e++)this.renderOption(this.options[e]);ctx.translate(-this.x,-this.y-this.offset)}renderOption(e){"toggle"===e.type?this.renderToggle(e):"button"===e.type&&this.renderButton(e)}renderToggle(e){ctx.strokeStyle="#333333";const t="#666666",o="#dddddd";if(time-e.changeTime<100){const n=(time-e.changeTime)/100;e.state?ctx.fillStyle=blendColor(t,o,n):ctx.fillStyle=blendColor(o,t,n)}else ctx.fillStyle=e.state?o:t;e.screenPosition={x:15+this.x,y:this.currentHeight+25-14+this.y,w:28,h:28},ctx.lineWidth=4.5,ctx.beginPath(),ctx.rect(e.screenPosition.x-this.x,e.screenPosition.y-this.y,e.screenPosition.w,e.screenPosition.h),ctx.fill(),ctx.stroke(),ctx.closePath(),ctx.font="900 17px 'Ubuntu'",ctx.textAlign="left",ctx.textBaseline="middle",ctx.fillStyle="white",ctx.strokeStyle="black",ctx.lineWidth=2,ctx.strokeText(e.name,56,this.currentHeight+25),ctx.fillText(e.name,56,this.currentHeight+25),this.currentHeight+=50}renderButton(e){ctx.strokeStyle="#8a8a8a",ctx.fillStyle="#b2b2b2",e.screenPosition={x:18+this.x,y:this.currentHeight+25-14+this.y,w:this.w-36,h:36},ctx.lineWidth=4.5,ctx.beginPath(),ctx.roundRect(e.screenPosition.x-this.x,e.screenPosition.y-this.y,e.screenPosition.w,e.screenPosition.h,8),!0===e.hovered&&(ctx.fill(),setCursor("pointer")),ctx.stroke(),ctx.closePath(),ctx.font=`900 ${e.fontSize??17.6}px 'Ubuntu'`,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle="white",ctx.strokeStyle="black",ctx.lineWidth=2,ctx.strokeText(e.name,this.w/2,this.currentHeight+29),ctx.fillText(e.name,this.w/2,this.currentHeight+29),this.currentHeight+=48}mouseDown(e){if(this.active)for(let t=0;t<this.options.length;t++){const o=this.options[t];"toggle"===o.type?this.processToggle(o,e):"button"===o.type&&this.processButton(o,e,"down")}}mouseMove(e){if(this.active)for(let t=0;t<this.options.length;t++){const o=this.options[t];"button"===o.type&&this.processButton(o,e,"move")}}processToggle(e,t){const{x:o,y:n}=t,s=e.screenPosition.x,i=e.screenPosition.y,a=e.screenPosition.w,r=e.screenPosition.h;o>s&&n>i&&o<s+a&&n<i+r&&(e.state=!e.state,e.changeTime=time,e.toggleFn(e.state))}processButton(e,t,o){"move"===o&&(e.hovered=!1);const{x:n,y:s}=t,i=e.screenPosition.x,a=e.screenPosition.y,r=e.screenPosition.w,c=e.screenPosition.h;n>i&&s>a&&n<i+r&&s<a+c&&("move"===o?e.hovered=!0:e.clickFn())}}const settingsMenu=new SettingsMenu;